<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Credit Score Prediction</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <header>
        <div class="container">
            <nav>
                <h1>Banking App</h1>
                <ul>
                    <li><a href="#">Home</a></li>
                    <li><a href="#">Accounts</a></li>
                    <li><a href="#">Transactions</a></li>
                    <li><a href="#">Bank Churn Prediction</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <section class="container">
        <aside class="sidebar">
            <h2>Menu</h2>
            <ul>
                <li><a href="#">Bank Churn Prediction</a></li>
                <li><a href="#">Explain Prediction</a></li>
            </ul>
        </aside>

        <main class="main-content">
            <form id="predictionForm" class="prediction-form">
                <label for="creditScore">Credit Score:</label>
                <input type="number" id="creditScore" name="creditScore" required>

                <label for="geography">Geography:</label>
                <select id="geography" name="geography" required>
                    <option value="France">France</option>
                    <option value="Germany">Germany</option>
                    <option value="Spain">Spain</option>
                </select>

                <label for="gender">Gender:</label>
                <select id="gender" name="gender" required>
                    <option value="Male">Male</option>
                    <option value="Female">Female</option>
                </select>

                <label for="age">Age:</label>
                <input type="number" id="age" name="age" required>

                <label for="tenure">Tenure:</label>
                <input type="number" id="tenure" name="tenure" required>

                <label for="balance">Balance:</label>
                <input type="number" id="balance" name="balance" step="0.01" required>

                <label for="numOfProducts">Number of Products:</label>
                <input type="number" id="numOfProducts" name="numOfProducts" required>

                <label for="hasCrCard">Has Credit Card:</label>
                <select id="hasCrCard" name="hasCrCard" required>
                    <option value="1">Yes</option>
                    <option value="0">No</option>
                </select>

                <label for="isActiveMember">Is Active Member:</label>
                <select id="isActiveMember" name="isActiveMember" required>
                    <option value="1">Yes</option>
                    <option value="0">No</option>
                </select>

                <label for="estimatedSalary">Estimated Salary:</label>
                <input type="number" id="estimatedSalary" name="estimatedSalary" step="0.01" required>

                <button type="button" onclick="predict()">Predict</button>
            </form>

            <div class="result-container">
                <h2>Prediction Result: <span id="predictionResult"></span></h2>
            </div>
        </main>
    </section>

    <script>
        function predict() {
            // Get input values from the form
            var creditScore = document.getElementById("creditScore").value;
            var geography = document.getElementById("geography").value;
            var gender = document.getElementById("gender").value;
            var age = document.getElementById("age").value;
            var tenure = document.getElementById("tenure").value;
            var balance = document.getElementById("balance").value;
            var numOfProducts = document.getElementById("numOfProducts").value;
            var hasCrCard = document.getElementById("hasCrCard").value;
            var isActiveMember = document.getElementById("isActiveMember").value;
            var estimatedSalary = document.getElementById("estimatedSalary").value;

            // Construct the input_data JSON
            var input_data = {
                "CreditScore": parseFloat(creditScore),
                "Geography": geography,
                "Gender": gender,
                "Age": parseFloat(age),
                "Tenure": parseFloat(tenure),
                "Balance": parseFloat(balance),
                "NumOfProducts": parseFloat(numOfProducts),
                "HasCrCard": parseInt(hasCrCard),
                "IsActiveMember": parseInt(isActiveMember),
                "EstimatedSalary": parseFloat(estimatedSalary),
            };

            // Make a POST request to the Flask API
            fetch("http://127.0.0.1:5001/predict", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                },
                body: JSON.stringify(input_data),
            })
            .then(response => response.json())
            .then(data => {
                // Update the prediction result in the HTML
                document.getElementById("predictionResult").innerText = data.prediction;

                
            })
            .catch(error => console.error("Error:", error));
        }
    </script>
</body>
</html>
